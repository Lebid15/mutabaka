# ๐ Push Notifications Setup Guide

## ุงููุดููุฉ ุงูุญุงููุฉ
ูุง ูููู ุฅุฑุณุงู Push Notifications ูุฃู Firebase Cloud Messaging API (Legacy) ูุนุทู.

## โ ุงูุญู: ุชูุนูู FCM Legacy API

### ุงูุฎุทูุฉ 1: ุชูุนูู Cloud Messaging API (Legacy)

ููุฌุฏ ุทุฑููุชุงู:

#### ุงูุทุฑููุฉ ุงูุฃููู (ุงูุณุฑูุนุฉ):
1. ูู ุตูุญุฉ **Cloud Messaging** ุงูุชู ุฃูุช ูููุง
2. ุงููุฑ ุนูู ุงูููุงุท ุงูุซูุงุซ (โฎ) ุจุฌุงูุจ **"Cloud Messaging API (Legacy)"**
3. ุงุฎุชุฑ **"Enable"** ุฃู **"ุชูุนูู"**

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ (ุฅุฐุง ูู ุชุธูุฑ ุฎูุงุฑ Enable):
1. ุงุฐูุจ ุฅูู Google Cloud Console: https://console.cloud.google.com/
2. ุงุฎุชุฑ ูุดุฑูุน `mutabaka-94ff1`
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ: **APIs & Services** โ **Library**
4. ุงุจุญุซ ุนู: **"Firebase Cloud Messaging API"**
5. ุงููุฑ ุนูู ุงููุชูุฌุฉ ุงูุฃููู
6. ุงููุฑ ุนูู ุฒุฑ **"Enable"**
7. ุงูุชุธุฑ ุจุถุน ุซูุงูู ุญุชู ูุชู ุงูุชูุนูู

---

### ุงูุฎุทูุฉ 2: ุงูุญุตูู ุนูู Server Key

ุจุนุฏ ุงูุชูุนูู:

1. ุงุฑุฌุน ุฅูู Firebase Console โ **Project Settings** โ **Cloud Messaging**
2. ูู ูุณู **"Cloud Messaging API (Legacy)"**
3. ุณุชุฌุฏ ุญูู **"Server key"**
4. ุงููุฑ ุนูู ุฃููููุฉ ุงููุณุฎ ููุณุฎ ุงูููุชุงุญ

---

### ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ Server Key ุฅูู Backend

1. ุงูุชุญ ููู `.env` ูู ูุฌูุฏ `backend` (ุฃู ุฃูุดุฆู ุฅุฐุง ูู ููู ููุฌูุฏุงู)

2. ุฃุถู ุงูุณุทุฑ ุงูุชุงูู:
```bash
EXPO_FCM_SERVER_KEY=YOUR_SERVER_KEY_HERE
```

3. ุงุณุชุจุฏู `YOUR_SERVER_KEY_HERE` ุจุงูู Server Key ุงูุฐู ูุณุฎุชู

**ูุซุงู:**
```bash
EXPO_FCM_SERVER_KEY=AAAAxxx...your-actual-key...xxxxx
```

---

### ุงูุฎุทูุฉ 4: ุฅุนุงุฏุฉ ุชุดุบูู Django Server

```bash
# ุฃููู ุงูุณูุฑูุฑ (Ctrl+C)
# ุซู ุดุบูู ูู ุฌุฏูุฏ
cd f:\mtk\backend
python manage.py runserver
```

---

### ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช

ุจุนุฏ ุฅุถุงูุฉ ุงูู Server Key ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ:

```bash
cd f:\mtk\backend
python send_test_notification.py
```

**ุงูููุฑูุถ ุชุดูู:**
```
โ Status Code: 200
๐จ Response: {'data': [{'status': 'ok', 'id': 'xxxx-xxxx-xxxx'}]}
๐ Push notification sent successfully!
```

ูุณูุธูุฑ ุงูุฅุดุนุงุฑ ูู ุดุฑูุท ุงูุฅุดุนุงุฑุงุช ูู ูุงุชู Android! ๐

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ุธูุฑ ุฎุทุฃ "InvalidCredentials":
- ุชุฃูุฏ ูู ุฃู Server Key ุตุญูุญ
- ุชุฃูุฏ ูู ุฃู ููู `.env` ูู ูุฌูุฏ `backend` ูุจุงุดุฑุฉ
- ุชุฃูุฏ ูู ุฃูู ุฃุนุฏุช ุชุดุบูู Django server

### ุฅุฐุง ุธูุฑ ุฎุทุฃ "DeviceNotRegistered":
- ุชุฃูุฏ ูู ุฃู ุงูุฌูุงุฒ ููุนูู (status='active')
- ุชุฃูุฏ ูู ุฃู push_token ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฅุฐุง ูู ูุธูุฑ ุงูุฅุดุนุงุฑ ุนูู ุงููุงุชู:
- ุชุฃูุฏ ูู ุฃู ุงูุชุทุจูู ููุชูุญ ุฃู ูู ุงูุฎูููุฉ
- ุชุฃูุฏ ูู ุฃู ุฃุฐููุงุช ุงูุฅุดุนุงุฑุงุช ููููุญุฉ
- ุฌุฑุจ ุฅุบูุงู ุงูุชุทุจูู ุชูุงูุงู ุซู ูุชุญู ูุฑุฉ ุฃุฎุฑู

---

## ๐ฑ ูุนูููุงุช ุงูุฌูุงุฒ ุงูุญุงูู

- **Device ID**: `AEE6hLAcNwJ71HZHxX9JSfz1kQ4BgtmU`
- **Push Token**: `ExponentPushToken[3Mbdk6NAXHzhbC9MN-6bHj]`
- **Status**: `active` โ
- **User**: `leibd`

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุจุนุฏ ูุฌุงุญ ุงูุงุฎุชุจุงุฑ)

1. โ ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑ ุงููุฏูู (test_push.py)
2. โ ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฑุณุงูุฉ ูู ูุณุชุฎุฏู ุขุฎุฑ
3. โ ุงูุชุฃูุฏ ูู ุฃู ุงูุฅุดุนุงุฑ ูุธูุฑ ุนูุฏ ุงุณุชูุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ
4. โ ุงุฎุชุจุงุฑ Navigation ุนูุฏ ุงูุถุบุท ุนูู ุงูุฅุดุนุงุฑ
5. โ ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช ูุน ุงูุชุทุจูู ูู ุงูุฎูููุฉ
6. โ ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช ูุน ุงูุชุทุจูู ูุบูู ุชูุงูุงู

---

## ๐ ููุงุญุธุฉ ุฃูููุฉ

**ูุง ุชุถู ุงูู Server Key ุฅูู Git!**

ุชุฃูุฏ ูู ุฃู `.env` ููุฌูุฏ ูู `.gitignore`:

```bash
# ูู ููู .gitignore
.env
*.env
```

---

## ๐ ูุตุงุฏุฑ ุฅุถุงููุฉ

- [Expo Push Notifications Docs](https://docs.expo.dev/push-notifications/overview/)
- [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging)
- [Expo FCM Setup Guide](https://docs.expo.dev/push-notifications/fcm/)
